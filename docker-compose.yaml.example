version: "3"


services:
  web:
    build:
      context: ./docker/web
      dockerfile: Dockerfile
    volumes:
      - ./docker/web/static:/app/static
      - ./docker/web/resources/db:/app/resources/db
      - ./docker/web/resources/logs:/app/resources/logs
      - ./docker/web/resources/devices:/app/resources/devices
    environment:
      - HOST=0.0.0.0
      - PORT=5090
      - DEBUG=True
      - WORK_DIR=app
      - TIME_ZONE=Europe/Moscow
      - FORMAT_NOTIFICATION=bot
      - DISCOVERY_PERIOD_SEC=30
      - DISCOVERY_WORKER_POOL=10
      - EXECUTOR_SERVICE_IMPL=PingExecutorService
      - BOT_TOKEN=
      - CHAT_ID=
      - GOTIFY_IP=localhost
      - GOTIFY_PORT=8081
      - GOTIFT_APP_TOKEN=
    command: 'python app/app.py flask run'
    network_mode: host
